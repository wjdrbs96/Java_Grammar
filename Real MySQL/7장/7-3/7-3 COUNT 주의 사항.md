# `MySQL COUNT() 함수 정리`

COUNT 함수는 모두가 알고 있듯이 결과 레코드의 건수를 반환하는 함수입니다. COUNT() 함수는 컬럼이나 표현식을 인자로 받고, COUNT(*)와 같이도 사용할 수 있습니다. `여기서 *는 SELECT 절에 사용될 때처럼 모든 컬럼을 가져오라는 의미가 아니라 그냥 레코드 자체를 의미하는 것입니다.`

실제로 COUNT(*)이라고 해서 레코드의 모든 컬럼을 읽는 형태로 처리하지는 않습니다. 그래서 굳이 COUNT(id), COUNT(1) 같이 사용하지 않아도 됩니다. COUNT(*)와 비슷한 속도로 처리된다고 합니다. (오.. 뭔가 차이가 있을 줄 알았지만 차이가 없다니~!!)

MyISAM 스토리지 엔진을 사용하는 테이블은 항상 테이블의 메타 정보에 전체 레코드 건수를 관리하고 있습니다. 

```sql
SELECT COUNT(*) FROM gyunny
```

위와 같은 쿼리는 MySQL 서버가 실제 레코드 건수를 세어 보지 않아도 바로 결과를 반환할 수 있기 때문에 빠르게 처리 됩니다. 하지만 WHERE 조건이 있는 COUNT(*) 쿼리는 그 조건에 일치하는 레코드를 읽어 보지 않는 이상 알 수 없으므로 일반적인 DBMS와 같이 처리 됩니다. 

`MyISAM` 이외의 스토리지 엔진을 사용하는 테이블에서는 WHERE 조건이 없는 COUNT(*) 쿼리라고 하더라도 직접 데이터나 인덱스를 익어야만 레코드 건수를 가져올 수 있기 때문에 큰 테이블에서 COUNT() 함수를 사용하는 작업은 주의해야 합니다. 
(저는 MySQL InnoDB를 대부분 사용하기에 잘 알아두어야 할 거 같은 내용이네요!)

<br> <br>

## `COUNT 쿼리에 대한 오해`

많은 사용자들이 일반적으로 컬럼의 값을 SELECT 하는 쿼리보다 COUNT(*) 쿼리가 훨씬 빠르게 실행될 것이라고 생각할 때가 많습니다. 하지만 인덱스를 제대로 사용하도록 튜닝하지 못한 COUNT(*) 쿼리는 페이징해서 데이터를 가져오는 쿼리보다 몇 배 또는 몇십 배 더 느리게 실행될 수도 있습니다. 
COUNT(*) 쿼리도 많은 부하를 일으키기 때문에 주의 깊게 작성해야 합니다. 