## `MySQL 스트리밍 방식과 버퍼링 방식`

### `스트리밍 방식`

<img width="607" alt="스크린샷 2024-04-12 오후 11 57 14" src="https://github.com/wjdrbs96/Today-I-Learn/assets/45676906/6ed52f6f-5d3c-4ad1-874e-464b65c78071">

`서버 쪽에서 처리할 데이터가 얼마인지에 관계 없이 조건에 일치하는 레코드가 검색될 때마다 바로바로 클라이언트로 전송해주는 것을 의미합니다.`

스트리밍 방식으로 처리되는 쿼리는 쿼리가 얼마나 많은 레코드를 조회하냐에 상관없이 빠른 응답 속도를 보장해줍니다.

<br>

### `버퍼링 방식`

<img width="803" alt="스크린샷 2024-04-13 오전 12 01 22" src="https://github.com/wjdrbs96/Today-I-Learn/assets/45676906/828add8b-50a7-4c58-8310-616595e01205">

ORDER BY나 GROUP BY 같은 처리는 쿼리의 결과가 스트리밍되는 것을 불가능하게 합니다. WHERE 조건에 일치하는 모든 레코드를 가져온 후, 정렬하거나 그룹핑해서 차례대로 보내야 하기 때문입니다.

MySQL 서버에서는 모든 레코드를 검색하고 정렬 작업을 하는 동안 클라이언트는 아무 것도 하지 않고 기다려야 하기 때문에 응답 속도는 느려집니다.

- 인덱스를 사용한 정렬
- 조인에서 드라이빙 테이블만 정렬 (`Using filesort`)
- 조인에서 조인 결과를 임시 테이블로 저장 후 정렬 (`Using temporary; Using filesort`)

ORDER BY의 3가지 처리 방법 가운데 인덱스를 사용한 정렬 방식만 스트리밍 형태의 처리이며, 나머지는 모두 버퍼링된 후의 정렬됩니다.

즉, 인덱스를 사용한 정렬 방식은 LIMIT으로 제한된 건수만큼만 읽으면서 바로바로 클라이언트로 결과를 전송해줄 수 있습니다. 하지만 인덱스를 사용하지 못하는 경우의 처리는 필요한 모든 레코드를 디스크로부터 읽어서 정렬한 후에야 비로소 LIMIT 으로 제한된 건수만큼 잘라서 클라이언트로 전송해줄 수 있음을 의미합니다.